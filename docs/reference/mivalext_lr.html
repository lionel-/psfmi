<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>External Validation of logistic prediction models in MI datasets — mivalext_lr • psfmi</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="External Validation of logistic prediction models in MI datasets — mivalext_lr" />

<meta property="og:description" content="mivalext_lr External validation of logistic prediction models" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psfmi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/psfmi-vignette.html">Welcome to the psfmi package</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mwheymans/psfmi">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>External Validation of logistic prediction models in MI datasets</h1>
    <small class="dont-index">Source: <a href='https://github.com/mwheymans/psfmi/blob/master/R/mivalext_lr.R'><code>R/mivalext_lr.R</code></a></small>
    <div class="hidden name"><code>mivalext_lr.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>mivalext_lr</code> External validation of logistic prediction models</p>
    
    </div>

    <pre class="usage"><span class='fu'>mivalext_lr</span>(<span class='kw'>data.val</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>data.orig</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>nimp</span> <span class='kw'>=</span> <span class='fl'>5</span>,
  <span class='kw'>impvar</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='no'>Outcome</span>, <span class='kw'>predictors</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>lp.orig</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>cal.plot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>plot.indiv</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>val.check</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>g</span> <span class='kw'>=</span> <span class='fl'>10</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data.val</th>
      <td><p>Data frame or data matrix with stacked multiple imputed validation datasets.
The original dataset that contains missing values must be excluded from the
dataset. The imputed datasets must be distinguished by an imputation variable,
specified under impvar, and starting by 1.</p></td>
    </tr>
    <tr>
      <th>data.orig</th>
      <td><p>A single data frame or data matrix containing the original dataset
that was used to develop the model. Used to estimate the original regression
coefficients in case lp.orig is not provided.</p></td>
    </tr>
    <tr>
      <th>nimp</th>
      <td><p>A numerical scalar. Number of imputed datasets. Default is 5.</p></td>
    </tr>
    <tr>
      <th>impvar</th>
      <td><p>A character vector. Name of the variable that distinguishes the
imputed datasets.</p></td>
    </tr>
    <tr>
      <th>Outcome</th>
      <td><p>Character vector containing the name of the outcome variable.</p></td>
    </tr>
    <tr>
      <th>predictors</th>
      <td><p>Character vector with the names of the predictor variables
of the model that is validated.</p></td>
    </tr>
    <tr>
      <th>lp.orig</th>
      <td><p>Numeric vector of the original coefficient values that are
externally validated.</p></td>
    </tr>
    <tr>
      <th>cal.plot</th>
      <td><p>If TRUE a calibration plot is generated. Default is FALSE.</p></td>
    </tr>
    <tr>
      <th>plot.indiv</th>
      <td><p>If TRUE calibration plots of each imputed dataset are
generated. Default is FALSE.</p></td>
    </tr>
    <tr>
      <th>val.check</th>
      <td><p>logical vector. If TRUE the names of the predictors of the LP
are provided and can be used as information for the order of the coefficient
values as input for lp.orig. If FALSE (default) validation procedure is executed
with coefficient values fitted in the order as used under lp.orig.</p></td>
    </tr>
    <tr>
      <th>g</th>
      <td><p>A numerical scalar. Number of groups for the Hosmer and
Lemeshow test. Default is 10.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>mivalext_lr</code> object from which the following objects 
 can be extracted: ROC results as <code>ROC</code>, R squared results (fixed and calibrated) 
 as <code>R2 (fixed)</code> and <code>R2 (calibr)</code>, Hosmer and Lemeshow test as <code>HL_test</code>, 
 coefficients pooled as <code>coef_pooled</code>, linear predictor pooled as <code>LP_pooled ext</code>, 
 and <code>Outcome</code>, <code>nimp</code>, <code>impvar</code>, <code>val.check</code>, 
 <code>g</code> and <code>coef.check</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The following information of the externally validated model is provided:
 pooled ROC curve (median and backtransformed after pooling log transformed
 ROC curves), pooled Nagelkerke R-Square value (median and backtransformed
 after pooling Fisher transformed values), pooled Hosmer and Lemeshow Test (using
 miceadds package), pooled coefficients when model is freely estimated in imputed
 datasets and the pooled linear predictor (LP), after the externally validated LP
 is estimated in each imputed dataset (provides information about miscalibration
 in intercept and slope). When the external validation is very poor,
 the R2 fixed can become negative due to the poor fit of the model in
 the external dataset (in that case you may report a R2 of zero).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>F. Harrell. Regression Modeling Strategies. With Applications to
 Linear Models, Logistic and Ordinal Regression, and Survival Analysis. Springer,
 New York, NY, 2015.</p>
<p>Van Buuren S. (2018). Flexible Imputation of Missing Data. 2nd Edition. Chapman &amp;
 Hall/CRC Interdisciplinary Statistics. Boca Raton.</p>
<p>http://missingdatasolutions.rbind.io/</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>mivalext_lr</span>(<span class='kw'>data.val</span><span class='kw'>=</span><span class='no'>lbpmilr</span>, <span class='kw'>nimp</span><span class='kw'>=</span><span class='fl'>10</span>, <span class='kw'>impvar</span><span class='kw'>=</span><span class='st'>"Impnr"</span>, <span class='kw'>Outcome</span><span class='kw'>=</span><span class='st'>"Chronic"</span>,
<span class='kw'>predictors</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Gender"</span>, <span class='st'>"factor(Carrying)"</span>, <span class='st'>"Function"</span>, <span class='st'>"Tampascale"</span>,  <span class='st'>"Age"</span>),
<span class='kw'>lp.orig</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>9.2</span>, -<span class='fl'>0.34</span>, <span class='fl'>0.92</span>, <span class='fl'>1.5</span>, <span class='fl'>0.5</span>, <span class='fl'>0.26</span>, -<span class='fl'>0.02</span>),
<span class='kw'>cal.plot</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>plot.indiv</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>val.check</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; $coef.check
#&gt; [1] "(Intercept)"       "Gender"            "factor(Carrying)2"
#&gt; [4] "factor(Carrying)3" "Function"          "Tampascale"       
#&gt; [7] "Age"              
#&gt; </div><div class='input'>
<span class='fu'>mivalext_lr</span>(<span class='kw'>data.val</span><span class='kw'>=</span><span class='no'>lbpmilr</span>, <span class='kw'>nimp</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>impvar</span><span class='kw'>=</span><span class='st'>"Impnr"</span>, <span class='kw'>Outcome</span><span class='kw'>=</span><span class='st'>"Chronic"</span>,
<span class='kw'>predictors</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Gender"</span>, <span class='st'>"factor(Carrying)"</span>, <span class='st'>"Function"</span>, <span class='st'>"Tampascale"</span>, <span class='st'>"Age"</span>),
<span class='kw'>lp.orig</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(-<span class='fl'>9.2</span>, -<span class='fl'>0.34</span>, <span class='fl'>0.92</span>, <span class='fl'>1.1</span>, -<span class='fl'>0.05</span>, <span class='fl'>0.26</span>, -<span class='fl'>0.02</span>),
<span class='kw'>cal.plot</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>plot.indiv</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>val.check</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Pooled performance measures over m = 5 imputed external validation datasets correctly estimated</span>
#&gt; <span class='message'></span></div><div class='img'><img src='mivalext_lr-1.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; $ROC
#&gt; $ROC$`ROC (logit)`
#&gt;             95% Low     ROC  95% Up
#&gt; ROC (logit) 0.69443 0.85534 0.93897
#&gt; 
#&gt; $ROC$`ROC (median)`
#&gt; 1st Qu.  Median 3rd Qu. 
#&gt; 0.85217 0.85717 0.85717 
#&gt; 
#&gt; 
#&gt; $`R2 (fixed)`
#&gt; $`R2 (fixed)`$`Fisher Z (fixed)`
#&gt; [1] 0.45327
#&gt; 
#&gt; $`R2 (fixed)`$`Median (fixed)`
#&gt; 1st Qu.  Median 3rd Qu. 
#&gt; 0.44697 0.45273 0.46010 
#&gt; 
#&gt; 
#&gt; $`R2 (calibr)`
#&gt; $`R2 (calibr)`$`Fisher Z (calibrated)`
#&gt; [1] 0.47016
#&gt; 
#&gt; $`R2 (calibr)`$`Median (calibrated)`
#&gt; 1st Qu.  Median 3rd Qu. 
#&gt; 0.46233 0.47385 0.47519 
#&gt; 
#&gt; 
#&gt; $`HL test`
#&gt;         D         p        df       df2 
#&gt;   1.87612   0.06490   8.00000 220.73396 
#&gt; 
#&gt; $coef_pooled
#&gt;       (Intercept)            Gender factor(Carrying)2 factor(Carrying)3 
#&gt;          -9.60243          -0.39017           0.99047           1.22873 
#&gt;          Function        Tampascale               Age 
#&gt;          -0.03100           0.24904          -0.01432 
#&gt; 
#&gt; $`LP_pooled ext`
#&gt; (Intercept)      lp.ext 
#&gt;    -0.34476     0.95859 
#&gt; 
#&gt; $nimp
#&gt; [1] 5
#&gt; 
#&gt; $impvar
#&gt; [1] "Impnr"
#&gt; 
#&gt; $Outcome
#&gt; [1] "Chronic"
#&gt; 
#&gt; $val.check
#&gt; [1] FALSE
#&gt; 
#&gt; $g
#&gt; [1] 10
#&gt; 
#&gt; $coef.check
#&gt; [1] "(Intercept)"       "Gender"            "factor(Carrying)2"
#&gt; [4] "factor(Carrying)3" "Function"          "Tampascale"       
#&gt; [7] "Age"              
#&gt; </div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Martijn Heymans.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

