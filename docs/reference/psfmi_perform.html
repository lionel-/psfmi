<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Evaluate performance of logistic regression models in Multiply Imputed datasets — psfmi_perform • psfmi</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Evaluate performance of logistic regression models in Multiply Imputed datasets — psfmi_perform" />
<meta property="og:description" content="psfmi_perform Evaluate Performance of logistic regression models selected with
 the psfmi_lr function of the psfmi package." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psfmi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/psfmi-vignette.html">Welcome to the psfmi package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mwheymans/psfmi">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Evaluate performance of logistic regression models in Multiply Imputed datasets</h1>
    <small class="dont-index">Source: <a href='https://github.com/mwheymans/psfmi/blob/master/R/psfmi_perform.R'><code>R/psfmi_perform.R</code></a></small>
    <div class="hidden name"><code>psfmi_perform.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>psfmi_perform</code> Evaluate Performance of logistic regression models selected with
 the <code>psfmi_lr</code> function of the <code>psfmi</code> package.</p>
    </div>

    <pre class="usage"><span class='fu'>psfmi_perform</span>(
  <span class='no'>pobj</span>,
  <span class='kw'>data_orig</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>nboot</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>int_val</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>nimp_boot_MI</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>p.crit</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>mice_method</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>mice_niter</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>mice_seed</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>predictorMatrix</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>cal.plot</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>plot.indiv</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>groups_cal</span> <span class='kw'>=</span> <span class='fl'>10</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>pobj</th>
      <td><p>An object of class <code>smodsmi</code> (selected models in multiply imputed datasets), 
produced by a previous call to <code>psfmi_lr</code>.</p></td>
    </tr>
    <tr>
      <th>data_orig</th>
      <td><p>dataframe of original dataset that contains missing data for method boot_MI</p></td>
    </tr>
    <tr>
      <th>nboot</th>
      <td><p>The number of bootstrap resamples, default is 10.</p></td>
    </tr>
    <tr>
      <th>int_val</th>
      <td><p>If TRUE internal validation is conducted in multiply imputed datasets. 
See <code>method</code> for methods that can be used.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Methods for internal validation in multiply imputed datasets.
Choose MI_boot for bootstrapping in each imputed dataset and boot_MI for multiple 
imputation in each bootstrap sample. To use the second method data_orig has to be specified.
The first method is faster. See details for more information.</p></td>
    </tr>
    <tr>
      <th>nimp_boot_MI</th>
      <td><p>Numerical scalar. Number of imputed datasets for method boot_MI.
When not defined, the number of multiply imputed datasets is used of the  
previous call to the function <code>psfmi_lr</code>.</p></td>
    </tr>
    <tr>
      <th>p.crit</th>
      <td><p>A numerical scalar. P-value selection criterium used for backward selection
during internal validation. When set at 1, pooling and internal validation is done without 
backward selection.</p></td>
    </tr>
    <tr>
      <th>mice_method</th>
      <td><p>The Multiple Imputation method used for each predictor with missing values. 
For Multiple Imputation the <code>mice</code> package is used. See that package for more information.</p></td>
    </tr>
    <tr>
      <th>mice_niter</th>
      <td><p>Numerical scalar. Default is 10. The number of iterations in Multiple Imputation. 
See the <code>mice</code> package for more information.</p></td>
    </tr>
    <tr>
      <th>mice_seed</th>
      <td><p>Numerical scalar. Default is random number generator initializeb by computer 
via set.seed().</p></td>
    </tr>
    <tr>
      <th>predictorMatrix</th>
      <td><p>A numeric matrix of nrow(data) rows and ncol(data) columns, containing 0/1 
data specifying the imputation models used to impute the predictors with missing data. Default 
is that each variable is used to impute other variables. See the <code>mice</code> package 
for more information.</p></td>
    </tr>
    <tr>
      <th>cal.plot</th>
      <td><p>If TRUE a calibration plot is generated. Default is FALSE. Can be used in combination
with int_val = FALSE.</p></td>
    </tr>
    <tr>
      <th>plot.indiv</th>
      <td><p>If TRUE calibration plots for each separate imputed dataset are generated, 
otherwise all calibration plots are plotted in one figure.</p></td>
    </tr>
    <tr>
      <th>groups_cal</th>
      <td><p>A numerical scalar. Number of groups used on the calibration plot. 
Default is 10. If the range of predicted probabilities is too low 5 groups can be
chosen.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>psfmi_perform</code> object from which the following objects can be extracted: <code>res_boot</code>, 
 result of pooled performance (in multiply imputed datasets) at each bootstrap step of ROC app (pooled 
 ROC), ROC test (pooled ROC after bootstrap model is applied in original multiply imputed datasets), 
 same for R2 app (Nagelkerke's R2), R2 test, Brier app and Brier test. Information is also provided 
 about testing the Calibration slope at each bootstrap step as interc test and Slope test. 
 The performance measures are pooled by a call to the function <code>pool_performance</code>. Another
 object that can be extracted is <code>intval</code>, with information of the AUC, R2, Brier score and 
 Calibration slope averaged over the bootstrap samples, in terms of: Orig (original datasets), 
 Apparent (models applied in bootstrap samples), Test (bootstrap models are applied in original datasets),
 Optimism (difference between apparent and test) and Corrected (original corrected for optimism).</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For internal validation two methods can be used, MI_boot and boot_MI. MI_boot draws
 for each bootstrap step the same cases in all imputed datasets. With boot_MI first bootstrap samples
 are drawn from the original dataset with missing values and than multiple imputation is
 applied. For multiple imputation the <code>mice</code> function from the <code>mice</code> package is used. 
 It is recommended to use a minumum of 100 bootstrap samples, which may take some time. The method
 boot_MI is more time consuming than MI_boot.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Heymans MW, van Buuren S, Knol DL, van Mechelen W, de Vet HC. Variable selection under 
 multiple imputation using the bootstrap in a prognostic study. BMC Med Res Methodol. 2007(13);7:33.</p>
<p>F. Harrell. Regression Modeling Strategies. With Applications to
 Linear Models, Logistic and Ordinal Regression, and Survival Analysis (2nd edition). Springer,
 New York, NY, 2015.</p>
<p>Van Buuren S. (2018). Flexible Imputation of Missing Data. 2nd Edition. Chapman &amp;
 Hall/CRC Interdisciplinary Statistics. Boca Raton.</p>
<p>Harel, O. (2009). The estimation of R2 and adjusted R2 in
 incomplete data sets using multiple imputation. Journal of Applied Statistics,
 36(10), 1109-1118.</p>
<p>Musoro JZ, Zwinderman AH, Puhan MA, ter Riet G, Geskus RB. Validation of prediction 
 models based on lasso regression with multiply imputed data. BMC Med Res Methodol. 2014;14:116.</p>
<p>Wahl S, Boulesteix AL, Zierer A, Thorand B, van de Wiel MA. Assessment of 
 predictive performance in incomplete data by combining internal validation and multiple 
 imputation. BMC Med Res Methodol. 2016;16(1):144.</p>
<p>EW. Steyerberg (2019). Clinical Prediction MOdels. A Practical Approach 
 to Development, Validation, and Updating (2nd edition). Springer Nature Switzerland AG.</p>
<p>http://missingdatasolutions.rbind.io/</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='no'>res_psfmi</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='psfmi_lr.html'>psfmi_lr</a></span>(<span class='kw'>data</span><span class='kw'>=</span><span class='no'>lbpmilr</span>, <span class='kw'>nimp</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>impvar</span><span class='kw'>=</span><span class='st'>"Impnr"</span>, <span class='kw'>Outcome</span><span class='kw'>=</span><span class='st'>"Chronic"</span>,
   <span class='kw'>predictors</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Gender"</span>, <span class='st'>"Pain"</span>,<span class='st'>"Tampascale"</span>,<span class='st'>"Smoking"</span>,<span class='st'>"Function"</span>, <span class='st'>"Radiation"</span>,
   <span class='st'>"Age"</span>), <span class='kw'>p.crit</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"D1"</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Pooled model correctly estimated</span>
#&gt; <span class='message'>           using a p-value of 1</span></div><div class='input'>
 <span class='no'>res_val</span> <span class='kw'>&lt;-</span> <span class='fu'>psfmi_perform</span>(<span class='no'>res_psfmi</span>, <span class='kw'>int_val</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>p.crit</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>cal.plot</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
   <span class='kw'>plot.indiv</span><span class='kw'>=</span><span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Performance measures pooled in original multiply imputed datasets</span></div><div class='img'><img src='psfmi_perform-1.png' alt='' width='700' height='433' /></div><div class='input'>   <span class='no'>res_val</span></div><div class='output co'>#&gt; $ROC_pooled
#&gt;               95% Low       ROC    95% Up
#&gt; ROC (logit) 0.7006584 0.8631544 0.9444357
#&gt; 
#&gt; $coef_pooled
#&gt; (Intercept)      Gender        Pain  Tampascale     Smoking    Function 
#&gt; -5.79886525 -0.26715138  0.52495881  0.10525269  0.16767371 -0.06610274 
#&gt;   Radiation         Age 
#&gt;  0.26468506 -0.01577622 
#&gt; 
#&gt; $R2_pooled
#&gt; [1] 0.4873082
#&gt; 
#&gt; $Brier_pooled
#&gt; [1] 0.149005
#&gt; 
#&gt; $nimp
#&gt; [1] 5
#&gt; </div><div class='input'>
 <span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
 <span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>200</span>)
 <span class='no'>res_val</span> <span class='kw'>&lt;-</span> <span class='fu'>psfmi_perform</span>(<span class='no'>res_psfmi</span>, <span class='kw'>int_val</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>p.crit</span><span class='kw'>=</span><span class='fl'>0.05</span>, <span class='kw'>nboot</span> <span class='kw'>=</span> <span class='fl'>10</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"MI_boot"</span>, <span class='kw'>cal.plot</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>plot.indiv</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
 <span class='no'>res_val</span>$<span class='no'>intval</span>
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Martijn Heymans.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


