<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Function to evaluate bootstrap predictor and model stability in multiply imputed datasets. — psfmi_stab • psfmi</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Function to evaluate bootstrap predictor and model stability in multiply imputed datasets. — psfmi_stab" />
<meta property="og:description" content="psfmi_stab Stability analysis of predictors and prediction models selected with
 the psfmi_lr, psfmi_coxr or psfmi_mm functions of the psfmi package." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psfmi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/psfmi-vignette.html">Welcome to the psfmi package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mwheymans/psfmi">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to evaluate bootstrap predictor and model stability in multiply imputed datasets.</h1>
    <small class="dont-index">Source: <a href='https://github.com/mwheymans/psfmi/blob/master/R/psfmi_stab.R'><code>R/psfmi_stab.R</code></a></small>
    <div class="hidden name"><code>psfmi_stab.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>psfmi_stab</code> Stability analysis of predictors and prediction models selected with
 the <code>psfmi_lr</code>, <code>psfmi_coxr</code> or <code>psfmi_mm</code> functions of the <code>psfmi</code> package.</p>
    </div>

    <pre class="usage"><span class='fu'>psfmi_stab</span>(<span class='no'>pobj</span>, <span class='kw'>boot_method</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>nboot</span> <span class='kw'>=</span> <span class='fl'>20</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>pobj</th>
      <td><p>An object of class <code>smodsmi</code> (selected models in multiply imputed datasets), 
produced by a previous call to <code>psfmi_lr</code>, <code>psfmi_coxr</code> or <code>psfmi_mm</code>.</p></td>
    </tr>
    <tr>
      <th>boot_method</th>
      <td><p>A single string to define the bootstrap method. Use "single" after a call to 
<code>psfmi_lr</code> and <code>psfmi_coxr</code> and "cluster" after a call to <code>psfmi_mm</code>.</p></td>
    </tr>
    <tr>
      <th>nboot</th>
      <td><p>A numerical scalar. Number of bootstrap samples to evaluate the stability. Default is 20.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>psfmi_stab</code> object from which the following objects can be extracted: bootstrap
 inclusion (selection) frequency of each predictor <code>bif</code>, total number each predictor is
 included in the bootstrap samples as <code>bif_total</code>, percentage a predictor is selected
 in each bootstrap sample as <code>bif_perc</code> and number of times a prediction model is selected in
 the bootstrap samples as <code>model_stab</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function evaluates predictor selection frequency in stratified or cluster bootstrap samples.
 The stratification factor is the variable that separates the imputed datasets. It uses as input
 an object of class <code>smodsmi</code> as a result of a previous call to the <code>psfmi_lr</code>, 
 <code>psfmi_coxr</code> or <code>psfmi_mm</code> functions. In combination with the <code>psfmi_mm</code> function
 a cluster bootstrap method is used where bootstrapping is used on the level of the clusters only.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Heymans MW, van Buuren S. et al. Variable selection under multiple imputation using the bootstrap
  in a prognostic study. BMC Med Res Methodol. 2007;13:7-33.</p>
<p>Eekhout I, van de Wiel MA, Heymans MW. Methods for significance testing of categorical
  covariates in logistic regression models after multiple imputation: power and applicability
  analysis. BMC Med Res Methodol. 2017;17(1):129.</p>
<p>Sauerbrei W, Schumacher M. A bootstrap resampling procedure for model building:
  application to the Cox regression model. Stat Med. 1992;11:2093–109.</p>
<p>Royston P, Sauerbrei W (2008) Multivariable model-building – a pragmatic approach to
  regression analysis based on fractional polynomials for modelling continuous variables. (2008).
  Chapter 8, Model Stability. Wiley, Chichester</p>
<p>Heinze G, Wallisch C, Dunkler D. Variable selection - A review and
 recommendations for the practicing statistician. Biom J. 2018;60(3):431-449.</p>
<p>http://missingdatasolutions.rbind.io/</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'> <span class='no'>pool_lr</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='psfmi_lr.html'>psfmi_lr</a></span>(<span class='kw'>data</span><span class='kw'>=</span><span class='no'>lbpmilr</span>, <span class='kw'>nimp</span><span class='kw'>=</span><span class='fl'>5</span>, <span class='kw'>impvar</span><span class='kw'>=</span><span class='st'>"Impnr"</span>, <span class='kw'>Outcome</span><span class='kw'>=</span><span class='st'>"Chronic"</span>,
                   <span class='kw'>predictors</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Gender"</span>, <span class='st'>"Smoking"</span>,  <span class='st'>"JobControl"</span>, <span class='st'>"JobDemands"</span>,
                   <span class='st'>"Age"</span>, <span class='st'>"Radiation"</span>, <span class='st'>"SocialSupport"</span>, <span class='st'>"Function"</span>),
                   <span class='kw'>cat.predictors</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Carrying"</span>), <span class='kw'>p.crit</span> <span class='kw'>=</span><span class='fl'>0.157</span>, <span class='kw'>method</span><span class='kw'>=</span><span class='st'>"D1"</span>)</div><div class='output co'>#&gt; <span class='message'>Variable excluded at Step 1 is - JobDemands</span></div><div class='output co'>#&gt; <span class='message'>Variable excluded at Step 2 is - Smoking</span></div><div class='output co'>#&gt; <span class='message'>Variable excluded at Step 3 is - Gender</span></div><div class='output co'>#&gt; <span class='message'>Variable excluded at Step 4 is - JobControl</span></div><div class='output co'>#&gt; <span class='message'>Variable excluded at Step 5 is - SocialSupport</span></div><div class='output co'>#&gt; <span class='message'>Variable excluded at Step 6 is - Function</span></div><div class='input'> <span class='no'>pool_lr</span>$<span class='no'>RR_Model</span></div><div class='output co'>#&gt; $`Step 1`
#&gt;                       est std.err signif   lower  upper     OR   L.OR    U.OR
#&gt; (Intercept)       -1.6939  2.9211 0.5620 -7.4220 4.0341 0.1838 0.0006 56.4915
#&gt; Gender            -0.2009  0.4780 0.6742 -1.1381 0.7362 0.8180 0.3204  2.0879
#&gt; Smoking            0.1234  0.3802 0.7456 -0.6218 0.8685 1.1313 0.5370  2.3834
#&gt; JobControl         0.0115  0.0228 0.6152 -0.0335 0.0565 1.0115 0.9670  1.0581
#&gt; JobDemands        -0.0086  0.0421 0.8384 -0.0912 0.0740 0.9914 0.9128  1.0768
#&gt; Age               -0.0286  0.0215 0.1847 -0.0708 0.0137 0.9718 0.9316  1.0138
#&gt; Radiation          1.0647  0.3946 0.0071  0.2899 1.8394 2.8998 1.3363  6.2926
#&gt; SocialSupport      0.0629  0.0647 0.3315 -0.0642 0.1901 1.0649 0.9378  1.2093
#&gt; Function          -0.0646  0.0509 0.2052 -0.1645 0.0354 0.9375 0.8483  1.0361
#&gt; factor(Carrying)2  1.1026  0.5179 0.0334  0.0870 2.1181 3.0119 1.0909  8.3152
#&gt; factor(Carrying)3  1.8879  0.5641 0.0009  0.7800 2.9958 6.6054 2.1814 20.0015
#&gt; 
#&gt; $`Step 2`
#&gt;                       est std.err signif   lower  upper     OR   L.OR    U.OR
#&gt; (Intercept)       -2.0409  2.5225 0.4194 -7.0157 2.9338 0.1299 0.0009 18.7988
#&gt; Gender            -0.1829  0.4694 0.6968 -1.1030 0.7371 0.8328 0.3319  2.0899
#&gt; Smoking            0.1214  0.3802 0.7496 -0.6239 0.8667 1.1291 0.5359  2.3790
#&gt; JobControl         0.0117  0.0228 0.6098 -0.0335 0.0569 1.0118 0.9671  1.0585
#&gt; Age               -0.0280  0.0215 0.1939 -0.0702 0.0143 0.9724 0.9322  1.0144
#&gt; Radiation          1.0539  0.3911 0.0072  0.2860 1.8217 2.8687 1.3311  6.1824
#&gt; SocialSupport      0.0629  0.0646 0.3305 -0.0640 0.1899 1.0650 0.9380  1.2091
#&gt; Function          -0.0643  0.0510 0.2079 -0.1645 0.0359 0.9377 0.8483  1.0365
#&gt; factor(Carrying)2  1.1122  0.5189 0.0323  0.0943 2.1300 3.0409 1.0989  8.4150
#&gt; factor(Carrying)3  1.8946  0.5659 0.0009  0.7826 3.0066 6.6499 2.1871 20.2189
#&gt; 
#&gt; $`Step 3`
#&gt;                       est std.err signif   lower  upper     OR   L.OR    U.OR
#&gt; (Intercept)       -2.0332  2.5252 0.4217 -7.0141 2.9477 0.1309 0.0009 19.0629
#&gt; Gender            -0.1707  0.4669 0.7146 -1.0860 0.7445 0.8430 0.3376  2.1054
#&gt; JobControl         0.0119  0.0228 0.6019 -0.0332 0.0571 1.0120 0.9673  1.0587
#&gt; Age               -0.0276  0.0215 0.1998 -0.0700 0.0147 0.9727 0.9324  1.0148
#&gt; Radiation          1.0486  0.3893 0.0072  0.2844 1.8128 2.8536 1.3290  6.1273
#&gt; SocialSupport      0.0627  0.0646 0.3323 -0.0642 0.1896 1.0647 0.9378  1.2087
#&gt; Function          -0.0637  0.0507 0.2097 -0.1632 0.0359 0.9383 0.8494  1.0366
#&gt; factor(Carrying)2  1.1353  0.5127 0.0269  0.1298 2.1409 3.1122 1.1386  8.5070
#&gt; factor(Carrying)3  1.8966  0.5649 0.0009  0.7865 3.0066 6.6631 2.1958 20.2191
#&gt; 
#&gt; $`Step 4`
#&gt;                       est std.err signif   lower  upper     OR   L.OR    U.OR
#&gt; (Intercept)       -2.2583  2.4678 0.3616 -7.1341 2.6174 0.1045 0.0008 13.7000
#&gt; JobControl         0.0136  0.0225 0.5480 -0.0311 0.0582 1.0137 0.9694  1.0599
#&gt; Age               -0.0287  0.0212 0.1764 -0.0703 0.0130 0.9717 0.9321  1.0130
#&gt; Radiation          1.0504  0.3883 0.0070  0.2883 1.8124 2.8587 1.3342  6.1252
#&gt; SocialSupport      0.0651  0.0642 0.3115 -0.0611 0.1912 1.0672 0.9408  1.2107
#&gt; Function          -0.0662  0.0500 0.1856 -0.1644 0.0319 0.9359 0.8484  1.0324
#&gt; factor(Carrying)2  1.1718  0.5035 0.0201  0.1840 2.1596 3.2278 1.2020  8.6673
#&gt; factor(Carrying)3  1.8997  0.5645 0.0008  0.7904 3.0090 6.6838 2.2043 20.2662
#&gt; 
#&gt; $`Step 5`
#&gt;                       est std.err signif   lower  upper     OR   L.OR    U.OR
#&gt; (Intercept)       -1.3222  1.8561 0.4767 -4.9722 2.3278 0.2665 0.0069 10.2554
#&gt; Age               -0.0291  0.0212 0.1705 -0.0707 0.0126 0.9713 0.9317  1.0126
#&gt; Radiation          1.0216  0.3796 0.0072  0.2769 1.7662 2.7776 1.3191  5.8487
#&gt; SocialSupport      0.0571  0.0625 0.3616 -0.0657 0.1799 1.0588 0.9364  1.1971
#&gt; Function          -0.0614  0.0500 0.2206 -0.1597 0.0370 0.9405 0.8524  1.0377
#&gt; factor(Carrying)2  1.1826  0.5027 0.0188  0.1964 2.1689 3.2630 1.2170  8.7486
#&gt; factor(Carrying)3  1.9089  0.5662 0.0008  0.7955 3.0223 6.7457 2.2156 20.5382
#&gt; 
#&gt; $`Step 6`
#&gt;                       est std.err signif   lower  upper     OR   L.OR    U.OR
#&gt; (Intercept)        0.0100  1.1407 0.9930 -2.2399 2.2599 1.0101 0.1065  9.5825
#&gt; Age               -0.0297  0.0213 0.1634 -0.0716 0.0122 0.9707 0.9309  1.0122
#&gt; Radiation          1.0145  0.3792 0.0076  0.2706 1.7584 2.7579 1.3107  5.8032
#&gt; Function          -0.0580  0.0500 0.2467 -0.1564 0.0404 0.9436 0.8552  1.0412
#&gt; factor(Carrying)2  1.1744  0.5026 0.0196  0.1884 2.1604 3.2362 1.2073  8.6749
#&gt; factor(Carrying)3  1.8784  0.5656 0.0010  0.7660 2.9908 6.5429 2.1511 19.9008
#&gt; 
#&gt; $`Step 7`
#&gt;                       est std.err signif   lower  upper     OR   L.OR    U.OR
#&gt; (Intercept)       -0.7085  0.9443 0.4538 -2.5690 1.1520 0.4924 0.0766  3.1645
#&gt; Age               -0.0309  0.0210 0.1428 -0.0723 0.0105 0.9696 0.9303  1.0106
#&gt; Radiation          1.0319  0.3754 0.0060  0.2957 1.7682 2.8065 1.3440  5.8605
#&gt; factor(Carrying)2  1.2860  0.4886 0.0085  0.3279 2.2441 3.6182 1.3880  9.4319
#&gt; factor(Carrying)3  2.1525  0.5058 0.0000  1.1601 3.1449 8.6066 3.1904 23.2176
#&gt; </div><div class='input'> <span class='no'>pool_lr</span>$<span class='no'>multiparm</span></div><div class='output co'>#&gt; $`Step 1`
#&gt;                  Chi_sq p-value D1 &amp; RR
#&gt; Gender            0.177          0.6742
#&gt; Smoking           0.105          0.7456
#&gt; JobControl        0.254          0.6152
#&gt; JobDemands        0.042          0.8384
#&gt; Age               1.765          0.1847
#&gt; Radiation         7.280          0.0071
#&gt; SocialSupport     0.944          0.3315
#&gt; Function          1.609          0.2052
#&gt; factor(Carrying)  5.724          0.0035
#&gt; 
#&gt; $`Step 2`
#&gt;                  Chi_sq p-value D1 &amp; RR
#&gt; Gender            0.152          0.6968
#&gt; Smoking           0.102          0.7496
#&gt; JobControl        0.262          0.6098
#&gt; Age               1.695          0.1939
#&gt; Radiation         7.262          0.0072
#&gt; SocialSupport     0.949          0.3305
#&gt; Function          1.590          0.2079
#&gt; factor(Carrying)  5.720          0.0035
#&gt; 
#&gt; $`Step 3`
#&gt;                  Chi_sq p-value D1 &amp; RR
#&gt; Gender            0.134          0.7146
#&gt; JobControl        0.273          0.6019
#&gt; Age               1.651          0.1998
#&gt; Radiation         7.255          0.0072
#&gt; SocialSupport     0.942          0.3323
#&gt; Function          1.577          0.2097
#&gt; factor(Carrying)  5.765          0.0034
#&gt; 
#&gt; $`Step 4`
#&gt;                  Chi_sq p-value D1 &amp; RR
#&gt; JobControl        0.363          0.5480
#&gt; Age               1.835          0.1764
#&gt; Radiation         7.319          0.0070
#&gt; SocialSupport     1.026          0.3115
#&gt; Function          1.756          0.1856
#&gt; factor(Carrying)  5.790          0.0033
#&gt; 
#&gt; $`Step 5`
#&gt;                  Chi_sq p-value D1 &amp; RR
#&gt; Age               1.887          0.1705
#&gt; Radiation         7.241          0.0072
#&gt; SocialSupport     0.833          0.3616
#&gt; Function          1.506          0.2206
#&gt; factor(Carrying)  5.840          0.0032
#&gt; 
#&gt; $`Step 6`
#&gt;                  Chi_sq p-value D1 &amp; RR
#&gt; Age               1.955          0.1634
#&gt; Radiation         7.157          0.0076
#&gt; Function          1.347          0.2467
#&gt; factor(Carrying)  5.684          0.0037
#&gt; 
#&gt; $`Step 7`
#&gt;                  Chi_sq p-value D1 &amp; RR
#&gt; Age               2.161          0.1428
#&gt; Radiation         7.558          0.0060
#&gt; factor(Carrying)  9.166          0.0001
#&gt; </div><div class='input'>
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
 <span class='no'>stab_res</span> <span class='kw'>&lt;-</span> <span class='fu'>psfmi_stab</span>(<span class='no'>pool_lr</span>, <span class='kw'>boot_method</span> <span class='kw'>=</span> <span class='st'>"single"</span>, <span class='kw'>nboot</span><span class='kw'>=</span><span class='fl'>50</span>)
 <span class='no'>stab_res</span>$<span class='no'>bif</span>
 <span class='no'>stab_res</span>$<span class='no'>bif_perc</span>
 <span class='no'>stab_res</span>$<span class='no'>model_stab</span>
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Martijn Heymans.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


